(()=>{var B=Object.defineProperty;var s=(e,t)=>B(e,"name",{value:t,configurable:!0});var u=Object.getPrototypeOf,_,x,p,h,I={isConnected:1},F=1e3,w,L={},J=u(I),N=u(u),f,$=s((e,t,r,n)=>(e??(setTimeout(r,n),new Set)).add(t),"addAndScheduleOnFirst"),E=s((e,t,r)=>{let n=p;p=t;try{return e(r)}catch(l){return console.error(l),r}finally{p=n}},"runAndCaptureDeps"),y=s(e=>e.filter(t=>t._dom?.isConnected),"keepConnected"),M=s(e=>w=$(w,e,()=>{for(let t of w)t._bindings=y(t._bindings),t._listeners=y(t._listeners);w=f},F),"addStatesToGc"),S={get val(){return p?._getters?.add(this),this.rawVal},get oldVal(){return p?._getters?.add(this),this._oldVal},set val(e){p?._setters?.add(this),e!==this.rawVal&&(this.rawVal=e,this._bindings.length+this._listeners.length?(x?.add(this),_=$(_,this,K)):this._oldVal=e)}},j=s(e=>({__proto__:S,rawVal:e,_oldVal:e,_bindings:[],_listeners:[]}),"state"),m=s((e,t)=>{let r={_getters:new Set,_setters:new Set},n={f:e},l=h;h=[];let o=E(e,r,t);o=(o??document).nodeType?o:new Text(o);for(let a of r._getters)r._setters.has(a)||(M(a),a._bindings.push(n));for(let a of h)a._dom=o;return h=l,n._dom=o},"bind"),C=s((e,t=j(),r)=>{let n={_getters:new Set,_setters:new Set},l={f:e,s:t};l._dom=r??h?.push(l)??I,t.val=E(e,n,t.rawVal);for(let o of n._getters)n._setters.has(o)||(M(o),o._listeners.push(l));return t},"derive"),G=s((e,...t)=>{for(let r of t.flat(1/0)){let n=u(r??0),l=n===S?m(()=>r.val):n===N?m(r):r;l!=f&&e.append(l)}return e},"add"),R=s((e,t,...r)=>{let[{is:n,...l},...o]=u(r[0]??0)===J?r:[{},...r],a=e?document.createElementNS(e,t,{is:n}):document.createElement(t,{is:n});for(let[c,i]of Object.entries(l)){let d=s(g=>g?Object.getOwnPropertyDescriptor(g,c)??d(u(g)):f,"getPropDescriptor"),v=t+","+c,D=L[v]??=d(u(a))?.set??0,O=c.startsWith("on")?(g,q)=>{let A=c.slice(2);a.removeEventListener(A,q),a.addEventListener(A,g)}:D?D.bind(a):a.setAttribute.bind(a,c),b=u(i??0);c.startsWith("on")||b===N&&(i=C(i),b=S),b===S?m(()=>(O(i.val,i._oldVal),a)):O(i)}return G(a,o)},"tag"),T=s(e=>({get:s((t,r)=>R.bind(f,e,r),"get")}),"handler"),U=s((e,t)=>t?t!==e&&e.replaceWith(t):e.remove(),"update"),K=s(()=>{let e=0,t=[..._].filter(n=>n.rawVal!==n._oldVal);do{x=new Set;for(let n of new Set(t.flatMap(l=>l._listeners=y(l._listeners))))C(n.f,n.s,n._dom),n._dom=f}while(++e<100&&(t=[...x]).length);let r=[..._].filter(n=>n.rawVal!==n._oldVal);_=f;for(let n of new Set(r.flatMap(l=>l._bindings=y(l._bindings))))U(n._dom,m(n.f,n._dom)),n._dom=f;for(let n of r)n._oldVal=n.rawVal},"updateDoms"),W={tags:new Proxy(e=>new Proxy(R,T(e)),T()),hydrate:s((e,t)=>U(e,m(t,e)),"hydrate"),add:G,state:j,derive:C};var k,P;function te(e){let t=e.charCodeAt(0);if(t<91&&t>64)return e;let r=String.fromCharCode(t-32),n=e.length,l=r,o=n,a;for(;o;--o)a=n-o,a&&(l=l+e[n-o]);return l}s(te,"capCase");function re(e,t){let r;return function(){let n=this,l=arguments;clearTimeout(r),r=setTimeout(()=>e.apply(n,l),t)}}s(re,"Dbounce");function ne(e,t){let r=0;return function(){if(Date.now()-r>t)return r=Date.now(),e.apply(this,arguments)}}s(ne,"throttle");function le(e,t,r){let n=[];if(r&&(n[0]=r),t||(t="span"),Array.isArray(e)){let l=e.length,o=l;for(;l;--l)n.push(e[o-l])}else n.push(e);return W.tags[t].apply(null,n)}s(le,"htm");function se(e){return new Promise(t=>setTimeout(t,e))}s(se,"sleep");async function z(e){let{paymentIntent:{status:t}}=await e.retrievePaymentIntent(P);return console.log(t),t}s(z,"refreshStatus");async function H(e,t){let r=document.getElementById("payment-message");if(P&&(e.status=await z(t)),console.log(e.status),e.error)r.textContent=`Something is amiss: ${JSON.stringify(e.error)}!`;else if(e.status==="requires_action"){let{error:n,paymentIntent:{client_secret:l,status:o,id:a}}=await t.handleNextAction({clientSecret:e.client_secret});if(n)r.textContent=`Something is amiss: ${n.message}!`;else{if(P=l,o==="requires_action")return r.textContent="Payment cancelled prematurely!",H(e,t);r.textContent="Payment successful!!",window.location.href=`/go/message?id=${a}`}}else e.status==="succeeded"&&(r.textContent="Payment successful!",window.location.href=`/go/message?id=${id}`)}s(H,"handleServerResponse");function V(e){return e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}s(V,"formatNumber");function Q(e){e||(e=.5);let t=2.9,r=.3,n=(e+r)/(1-t/100);return Math.round(n*100)/100}s(Q,"calculateGrossAmount");function ae(e,t){if(e.value!==""){var r=e.value,n=parseFloat(r.substring(4)),l=Q(n);if(t==="blur")if(k!==n)r="US$ "+l.toString(),k=l;else return;var o=r.length,a=e.selectionStart;if(r.indexOf(".")>=0){var c=r.indexOf("."),i=r.substring(0,c),d=r.substring(c);i=V(i),d=V(d),t==="blur"&&(d+="00"),d=d.substring(0,2),r="US$ "+i+"."+d}else r=V(r),r="US$ "+r,t==="blur"&&r.length===4?r+="0.50":t==="blur"&&(r+=".00");e.value=r;var v=r.length;a=v-o+a,e.setSelectionRange(a,a)}}s(ae,"formatCurrency");})();
