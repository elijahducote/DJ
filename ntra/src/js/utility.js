(()=>{var B=Object.defineProperty;var s=(e,r)=>B(e,"name",{value:r,configurable:!0});var u=Object.getPrototypeOf,m,C,g,_,$={isConnected:1},F=1e3,y,L={},J=u($),I=u(u),f,N=s((e,r,t,n)=>(e??(setTimeout(t,n),new Set)).add(r),"addAndScheduleOnFirst"),E=s((e,r,t)=>{let n=g;g=r;try{return e(t)}catch(l){return console.error(l),t}finally{g=n}},"runAndCaptureDeps"),S=s(e=>e.filter(r=>r._dom?.isConnected),"keepConnected"),M=s(e=>y=N(y,e,()=>{for(let r of y)r._bindings=S(r._bindings),r._listeners=S(r._listeners);y=f},F),"addStatesToGc"),b={get val(){return g?._getters?.add(this),this.rawVal},get oldVal(){return g?._getters?.add(this),this._oldVal},set val(e){g?._setters?.add(this),e!==this.rawVal&&(this.rawVal=e,this._bindings.length+this._listeners.length?(C?.add(this),m=N(m,this,K)):this._oldVal=e)}},j=s(e=>({__proto__:b,rawVal:e,_oldVal:e,_bindings:[],_listeners:[]}),"state"),v=s((e,r)=>{let t={_getters:new Set,_setters:new Set},n={f:e},l=_;_=[];let a=E(e,t,r);a=(a??document).nodeType?a:new Text(a);for(let o of t._getters)t._setters.has(o)||(M(o),o._bindings.push(n));for(let o of _)o._dom=a;return _=l,n._dom=a},"bind"),V=s((e,r=j(),t)=>{let n={_getters:new Set,_setters:new Set},l={f:e,s:r};l._dom=t??_?.push(l)??$,r.val=E(e,n,r.rawVal);for(let a of n._getters)n._setters.has(a)||(M(a),a._listeners.push(l));return r},"derive"),G=s((e,...r)=>{for(let t of r.flat(1/0)){let n=u(t??0),l=n===b?v(()=>t.val):n===I?v(t):t;l!=f&&e.append(l)}return e},"add"),R=s((e,r,...t)=>{let[{is:n,...l},...a]=u(t[0]??0)===J?t:[{},...t],o=e?document.createElementNS(e,r,{is:n}):document.createElement(r,{is:n});for(let[i,d]of Object.entries(l)){let p=s(h=>h?Object.getOwnPropertyDescriptor(h,i)??p(u(h)):f,"getPropDescriptor"),c=r+","+i,w=L[c]??=p(u(o))?.set??0,O=i.startsWith("on")?(h,q)=>{let A=i.slice(2);o.removeEventListener(A,q),o.addEventListener(A,h)}:w?w.bind(o):o.setAttribute.bind(o,i),x=u(d??0);i.startsWith("on")||x===I&&(d=V(d),x=b),x===b?v(()=>(O(d.val,d._oldVal),o)):O(d)}return G(o,a)},"tag"),T=s(e=>({get:s((r,t)=>R.bind(f,e,t),"get")}),"handler"),U=s((e,r)=>r?r!==e&&e.replaceWith(r):e.remove(),"update"),K=s(()=>{let e=0,r=[...m].filter(n=>n.rawVal!==n._oldVal);do{C=new Set;for(let n of new Set(r.flatMap(l=>l._listeners=S(l._listeners))))V(n.f,n.s,n._dom),n._dom=f}while(++e<100&&(r=[...C]).length);let t=[...m].filter(n=>n.rawVal!==n._oldVal);m=f;for(let n of new Set(t.flatMap(l=>l._bindings=S(l._bindings))))U(n._dom,v(n.f,n._dom)),n._dom=f;for(let n of t)n._oldVal=n.rawVal},"updateDoms"),W={tags:new Proxy(e=>new Proxy(R,T(e)),T()),hydrate:s((e,r)=>U(e,v(r,e)),"hydrate"),add:G,state:j,derive:V};var D,P;function te(e){let r=e.charCodeAt(0);if(r<91&&r>64)return e;let t=String.fromCharCode(r-32),n=e.length,l=t,a=n,o;for(;a;--a)o=n-a,o&&(l=l+e[n-a]);return l}s(te,"capCase");function re(e,r){let t;return function(){let n=this,l=arguments;clearTimeout(t),t=setTimeout(()=>e.apply(n,l),r)}}s(re,"Dbounce");function ne(e,r){let t=0;return function(){if(Date.now()-t>r)return t=Date.now(),e.apply(this,arguments)}}s(ne,"throttle");function le(e,r,t){let n=[];if(t&&(n[0]=t),r||(r="span"),Array.isArray(e)){let l=e.length,a=l;for(;l;--l)n.push(e[a-l])}else n.push(e);return W.tags[r].apply(null,n)}s(le,"htm");function se(e){return new Promise(r=>setTimeout(r,e))}s(se,"sleep");async function z(e){let{paymentIntent:{status:r}}=await e.retrievePaymentIntent(P);return console.log(r),r}s(z,"refreshStatus");async function H(e,r){let t=document.getElementById("payment-message");if(P&&(e.status=await z(r)),console.log(e.status),e.error)t.textContent=`Something is amiss: ${JSON.stringify(e.error)}!`;else if(e.status==="requires_action"){let{error:n,paymentIntent:{client_secret:l,status:a,id:o}}=await r.handleNextAction({clientSecret:e.client_secret});if(n)t.textContent=`Something is amiss: ${n.message}!`;else{if(P=l,a==="requires_action")return t.textContent="Payment cancelled prematurely!",H(e,r);t.textContent="Payment successful!!",window.location.href=`/go/message?id=${o}`}}else e.status==="succeeded"&&(t.textContent="Payment successful!",window.location.href=`/go/message?id=${id}`)}s(H,"handleServerResponse");function k(e){return e.replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}s(k,"formatNumber");function Q(e){e||(e=.5);let r=2.9,t=.3,n=(e+t)/(1-r/100);return Math.round(n*100)/100}s(Q,"calculateGrossAmount");function ae(e,r){if(e.value!==""){var t=e.value;t.startsWith("US$ ")&&(t=t.substring(4));var n=t.replace(/,/g,""),l=parseFloat(n),a=Q(l);if(r==="blur")if(!D||D!==l)t=a.toString(),D=a;else return;else t=n;var o=e.value.length,i=e.selectionStart;if(t.indexOf(".")>=0){var d=t.indexOf("."),p=t.substring(0,d),c=t.substring(d+1);p=k(p),c=c.replace(/\D/g,""),r==="blur"&&(c+="00",c=c.substring(0,2)),c=c.substring(0,2),t="US$ "+p+"."+c}else t=k(t),t="US$ "+t,r==="blur"&&t==="US$ "?t+="0.50":r==="blur"&&(t+=".00");e.value=t;var w=t.length;i=w-o+i,e.setSelectionRange(i,i)}}s(ae,"formatCurrency");})();
